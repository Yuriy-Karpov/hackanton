// @ts-ignore
import Jenkins from "node-jenkins";

// @ts-ignore
// const jenkins = new Jenkins(({ baseUrl: 'http://HackAdmin:Hackaton2019@159.69.7.170:8080', crumbIssuer: true }));

// const jenkins = new Jenkins('HackAdmin', '1102cc46866598cb3d066949f51aaa5215', 'http://159.69.7.170:8080');

/** выворачиваем колбэки в ппромисы **/

export const jenkinsInfo = async () => {
    // return jenkins.info();
    // return new Promise((resolve, reject) => {
    //     jenkins.info((err: any, data: any) => {
    //         if (err) {
    //             reject(err);
    //         }
    //         resolve(data);
    //     });
    // });
};

export const jenkinsBuild = (name:string) => {
    // return new Promise((resolve, reject) => {
    //     jenkins.job.build({name, parameters: {data: 'Hello World'}}, (err: any, data: any) => {
    //         if (err) {
    //             reject(err);
    //         }
    //         resolve(data);
    //     });
    // });
};

export const jenkinsGet = (name:string) => {
    // return new Promise((resolve, reject) => {
    //     console.log('++name', name);
    //     jenkins.build.log(name, (err: any, data: any) => {
    //         if (err) {
    //             reject(err);
    //         }
    //         console.log('++data ', data)
    //         resolve(data);
    //     });
    // })
};



export const jenkinsStream = async ({name, n, bot, peer}: any) => {
    // return new Promise((resolve, reject) => {
    //     const log = jenkins.build.logStream(name, n);
    //
    //     log.on('data', (text: any) => {
    //          bot.sendText(
    //             peer,
    //             text
    //         );
    //     });
    //
    //     log.on('error', function(err: any) {
    //         reject(err);
    //     });
    //
    //     log.on('end', function() {
    //         console.log('++END!!!!!!!!!!!!!!')
    //         resolve('end')
    //     });
    // });
};
